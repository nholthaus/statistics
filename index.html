<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Queue: Queue</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Queue
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">A C++17 Library of various `queue` containers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Queue </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="markdown-queue"></a> <a href="https://travis-ci.org/github/nholthaus/queue"><object type="image/svg+xml" data="https://travis-ci.org/nholthaus/queue.svg?branch=main" style="pointer-events: none;">Build Status</object></a> <a href="https://ci.appveyor.com/project/nholthaus/queue/branch/master"><img src="https://ci.appveyor.com/api/projects/status/dfoks5b44qsgf7ka/branch/master?svg=true" alt="Build status" class="inline"/></a> <object type="image/svg+xml" data="https://img.shields.io/badge/language-c++17-blue.svg" style="pointer-events: none;">language</object> <object type="image/svg+xml" data="https://img.shields.io/badge/license-MIT-orange.svg" style="pointer-events: none;">license</object> <object type="image/svg+xml" data="https://img.shields.io/badge/%C2%A9-Nic_Holthaus-orange.svg" style="pointer-events: none;">copyright</object> <object type="image/svg+xml" data="https://img.shields.io/badge/MSVC-2019-ff69b4.svg" style="pointer-events: none;">msvc2019</object> <object type="image/svg+xml" data="https://img.shields.io/badge/GCC-9.3.0-ff69b4.svg" style="pointer-events: none;">gcc-9.3.0</object></p>
<p>A modern C++ header-only library of various types of queue</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Table of Contents</h1>
<p><a class="anchor" id="markdown-table-of-contents"></a></p>
<ul>
<li><a href="#queue">Queue</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#build-instructions">Build Instructions</a></li>
<li><a href="#usage">Usage</a><ul>
<li><a href="#concurrent-queue">Concurrent Queue</a><ul>
<li><a href="#example">Example</a></li>
</ul>
</li>
<li><a href="#circular-queue">Circular Queue</a><ul>
<li><a href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Build Instructions</h1>
<p><a class="anchor" id="markdown-build-instructions"></a></p>
<p>Each class in the library itself is a single header only. You can use the included CMake in a subdirectory and add the interface library, or just copy the <code>*.h</code> files (and license) into your project.</p>
<p>To build and run the unit tests:</p>
<div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake -DBUILD_TESTS=ON ..</div>
<div class="line">cmake --build . --config Release</div>
<div class="line">ctest</div>
</div><!-- fragment --><p>To build the documentation, replace the above <code>cmake</code> command with the following:</p>
<div class="fragment"><div class="line">cmake -DBUILD_TESTS=ON -DBUILD_DOCUMENTATION=ON ..</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3"></a>
Usage</h1>
<p><a class="anchor" id="markdown-usage"></a></p>
<h2><a class="anchor" id="autotoc_md4"></a>
Concurrent Queue</h2>
<p><a class="anchor" id="markdown-concurrent-queue"></a></p>
<p>The <code><a class="el" href="classconcurrent__queue.html" title="The concurrent_queue class is a sequence container class that allows first-in, first-out access to it...">concurrent_queue</a></code> class is a templated FIFO (first-in, first-out) queue that is suitable for concurrent use, including cases where there are multiple producers and multiple consumers reading and writing the queue simultaneously. It has an atomic <code>push</code>/<code>pop</code> interface for enqueueing and dequeueing elements.</p>
<h3><a class="anchor" id="autotoc_md5"></a>
Example</h3>
<p><a class="anchor" id="markdown-example"></a></p>
<p>Run it live on <a href="https://godbolt.org/z/Gn3znj">Compiler Explorer</a>.</p>
<div class="fragment"><div class="line">#include &lt;chrono&gt;</div>
<div class="line">#include &lt;future&gt;</div>
<div class="line">#include &lt;iostream&gt;</div>
<div class="line">#include &lt;numeric&gt;</div>
<div class="line">#include &lt;thread&gt;</div>
<div class="line">#include &lt;vector&gt;</div>
<div class="line"> </div>
<div class="line">#include &lt;concurrent_queue.h&gt;</div>
<div class="line"> </div>
<div class="line">using namespace std::chrono_literals;</div>
<div class="line"> </div>
<div class="line">int main()</div>
<div class="line">{</div>
<div class="line">        // Push 100 ints from one deque to another via a set of producer/consumer threads</div>
<div class="line">        // running at different rates via a concurrent queue</div>
<div class="line">        </div>
<div class="line">        constexpr int    test_size = 100;</div>
<div class="line">        std::deque&lt;int&gt; numbers_in(test_size);</div>
<div class="line">        std::deque&lt;int&gt; numbers_out;</div>
<div class="line">        std::iota(numbers_in.begin(), numbers_in.end(), 0);</div>
<div class="line">        </div>
<div class="line">        std::cout &lt;&lt; &quot;In size: &quot; &lt;&lt; numbers_in.size() &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; &quot;Out size: &quot; &lt;&lt; numbers_out.size() &lt;&lt; std::endl;</div>
<div class="line">        </div>
<div class="line">        concurrent_queue&lt;int&gt; queue;</div>
<div class="line">        </div>
<div class="line">        // produce integers at 200Hz and consume them at 1000 Hz</div>
<div class="line">        auto producer = std::async(std::launch::async, [&amp;queue, &amp;numbers_in]</div>
<div class="line">               {</div>
<div class="line">                   while(!numbers_in.empty())</div>
<div class="line">                   {</div>
<div class="line">                       queue.push(numbers_in.front());</div>
<div class="line">                       numbers_in.pop_front();</div>
<div class="line">                       std::this_thread::sleep_for(5ms);</div>
<div class="line">                   }</div>
<div class="line">                   return std::this_thread::get_id();</div>
<div class="line">               });</div>
<div class="line">        auto consumer = std::async(std::launch::async, [&amp;queue, &amp;numbers_out, test_size]</div>
<div class="line">               {</div>
<div class="line">                   int val;</div>
<div class="line">                   while (numbers_out.size() &lt; test_size)</div>
<div class="line">                   {</div>
<div class="line">                       if (queue.try_pop_for(val, 1ms))</div>
<div class="line">                           numbers_out.push_back(val);</div>
<div class="line">                   }</div>
<div class="line">                   return std::this_thread::get_id();</div>
<div class="line">               });</div>
<div class="line"> </div>
<div class="line">        auto producer_id = producer.get();</div>
<div class="line">        auto consumer_id = consumer.get();</div>
<div class="line">        </div>
<div class="line">        std::cout &lt;&lt; &quot;In size: &quot; &lt;&lt; numbers_in.size() &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; &quot;Out size: &quot; &lt;&lt; numbers_out.size() &lt;&lt; std::endl;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md6"></a>
Circular Queue</h2>
<p><a class="anchor" id="markdown-circular-queue"></a></p>
<p>The <code><a class="el" href="classcircular__queue.html" title="Fixed capacity, STL-style, templated circular buffer.">circular_queue</a></code> class is a fixed capacity, STL-style, templated circular buffer.</p>
<p>See <a href="http://en.wikipedia.org/wiki/Circular_buffer">http://en.wikipedia.org/wiki/Circular_buffer</a> for details of how circular buffers work.</p>
<p>This implementation shares many features of a double-ended queue. This structure allows for the individual elements to be accessed directly through random access iterators, with storage handled automatically by over-writing elements from the opposite end of the container as it grows. As long as elements are added consistently to EITHER the front or the back, once full, the container will expand by over-writing the oldest element. If elements are added to both sides of the buffer, the behavior is effectively user defined.</p>
<p>Therefore, the <code><a class="el" href="classcircular__queue.html" title="Fixed capacity, STL-style, templated circular buffer.">circular_queue</a></code> provides a functionality similar to vectors, but with efficient insertion and deletion of elements also at the beginning of the sequence, and not only at its end. Also, like vectors (and unlike dequeues), all elements are stored in contiguous memory locations, and offset access IS allowed.</p>
<p>Both vectors and the <code><a class="el" href="classcircular__queue.html" title="Fixed capacity, STL-style, templated circular buffer.">circular_queue</a></code> provide a very similar interface and can be used for similar purposes, but internally both work in quite different ways: While vectors use a single array that needs to be occasionally reallocated for growth, the elements of a <code><a class="el" href="classcircular__queue.html" title="Fixed capacity, STL-style, templated circular buffer.">circular_queue</a></code> are over-written once the buffer reaches its maximum capacity, ensuring elements are inserted and accessed in constant time and with a uniform sequential interface (through iterators), as opposed to the vector's amortized constant time. This allows them to grow more efficiently under certain circumstances, especially with very long sequences, where reallocation's become more expensive, and real-time applications where stale data is not as useful as current data.</p>
<p>For operations that involve frequent insertion or removals of elements at positions other than the beginning or the end, <code><a class="el" href="classcircular__queue.html" title="Fixed capacity, STL-style, templated circular buffer.">circular_queue</a></code> performs worse and has less consistent iterators and references than lists and forward lists.</p>
<h3><a class="anchor" id="autotoc_md7"></a>
Example</h3>
<p><a class="anchor" id="markdown-example"></a></p>
<p>Run it live on <a href="https://godbolt.org/z/f3dscW">Compiler Explorer</a>.</p>
<div class="fragment"><div class="line">#include &lt;iostream&gt;</div>
<div class="line">#include &lt;circular_queue.h&gt;</div>
<div class="line"> </div>
<div class="line">int main()</div>
<div class="line">{</div>
<div class="line">    circular_queue&lt;int&gt; q(10);</div>
<div class="line"> </div>
<div class="line">    for(int i = 0; i &lt; 13; ++i)</div>
<div class="line">    {</div>
<div class="line">        q.push_back(i);</div>
<div class="line">        if(q.full()) std::cout &lt;&lt; &quot;Buffer Overflow!&quot; &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    for(unsigned int i = 0; i &lt; q.size(); ++i)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; &quot;q[&quot; &lt;&lt; i &lt;&lt; &quot;]: &quot; &lt;&lt; q[i] &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
